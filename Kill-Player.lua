-- Put this script in the StarterPlayer > StarterPlayerScripts folder

-- Define the tool to be thrown
local throwTool = Instance.new("Tool")
throwTool.RequiresHandle = true
throwTool.Name = "ThrowTool"
throwTool.RequiresHandle = true

-- Table to keep track of the last player who touched another player
local lastTouchedPlayer = {}

-- Function to handle player touch
local function onTouch(hit)
    local character = hit.Parent
    local humanoid = character:FindFirstChildOfClass("Humanoid")

    -- Check if the touched object is a character with a humanoid
    if humanoid then
        -- "Kill" the touched player by resetting their character
        humanoid.Health = 0

        -- Store the last player who touched this character
        lastTouchedPlayer[character] = game.Players:GetPlayerFromCharacter(character)

        -- Wait a moment before throwing the tool
        wait(0.5)

        -- Clone the tool and parent it to the character
        local thrownTool = throwTool:Clone()
        thrownTool.Parent = character

        -- Set up a click event for the tool
        thrownTool.Activated:Connect(function()
            print("Tool activated!")

            -- Get the player who last touched this character
            local player = lastTouchedPlayer[character]

            if player then
                -- Give the tool to the player who last touched
                thrownTool.Parent = player.Backpack
            end
        end)
    end
end

-- Connect the onTouch function to the Touched event of all parts in the game
game.Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(character)
        character:WaitForChild("Humanoid").Touched:Connect(onTouch)
    end)
end)


